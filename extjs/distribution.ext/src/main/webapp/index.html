<!DOCTYPE HTML>
<html manifest="">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title> 配网能效管理云平台</title>
	<link rel="stylesheet" type="text/css" href="resources/css/index.css" />
	<link rel="stylesheet" type="text/css" href="resources/css/progress.css" />
</head>
<body>
	<div id="progress" class="progress progress--active" style="width: 100%;height:1px;">
		<b id="progressbar" style="width:0%;" class="progress__bar">
			<span id="progresstext" class="progress__text" style="color:#000000;">
		      	加载进度: <em>0%</em>
		    </span>
		</b>
	</div>
</body>

<script type="text/javascript">
	var Ext = Ext || {};
 	Ext.beforeLoad = function(tags) {
 		var desktop = tags.desktop;
 		var style = location.href.match(/style=([\w-]+)/);
 		var color = location.href.match(/color=([\w-]+)/);
 		style = (style && style[1]) || localStorage.getItem("style");   /**系统皮肤*/
 		color = (color && color[1]) || localStorage.getItem("color");   /**系统颜色*/
 		if(desktop){
 			var html ='<div id="loading"> '
					 +'	  <div class="loading-indicator"> '
					 +'		  <img src="resources/images/system/large-loading.gif" width="32" height="32" /> '
					 +'		      配网能效管理云平台'
					 +'		  <br/> <span id="loading-msg">Loading...</span> '
					 +'	  </div> '
					 +'</div>';
        	document.write(html);
        	Ext.style = style = style || 'triton';
	        style = 'build/development/app/'+style+'/'+style + '.json';
			if(color && color.length ==6){
				localStorage.setItem("color",color);
				document.write('<style type="text/css">:root {--color: #'+color+';} </style>');
				document.write('<link rel="stylesheet" type="text/css" href="resources/css/skin.css" />');
			}
 		}
 		Ext.manifest = style;
		var sum = 112,i = 0,orange = 30, yellow = 55, green = 85;
		var progressbar = document.getElementById("progressbar");
		var progresstext =  document.getElementById("progresstext");
		Ext.urlCompleteCallback= function(entry){
			var percent = parseInt(((i++/sum)*100));
			if(percent>100)return;
			if(percent>orange)progressbar.className += " progress__bar--orange";
			if(percent>yellow)progressbar.className += " progress__bar--yellow";
			if(percent>green)progressbar.className += " progress__bar--green";
		 	progressbar.style.width= percent+"%";
			progresstext.childNodes[1].innerText = percent+"%";
		};
	 };
</script>
<script id="microloader" data-app="e13780b7-397a-431c-ae7c-296f9558aaf6" type="text/javascript" src="bootstrap.js"></script>
</html>
